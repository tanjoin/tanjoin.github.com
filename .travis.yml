language: ruby
rvm: 2.4.1
before_install:
- sudo apt-get -y --reinstall install imagemagick
script:
- if [ $TRAVIS_EVENT_TYPE = cron ]; then mkdir -p project ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then pushd project ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then echo -e "machine github.com\n  login $CI_USER_TOKEN" >> ~/.netrc ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then git clone --branch develop --depth 1 https://github.com/tanjoin/tanjoin.github.io.git ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then pushd tanjoin.github.io ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then git config user.name "tanjoin" ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then git config user.email "tanjoin@users.noreply.github.com" ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then echo `date` > .updated ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then git add .updated ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then git commit -m "Update .updated" ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then git push origin develop ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then popd ; fi
- if [ $TRAVIS_EVENT_TYPE = cron ]; then popd ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then mkdir -p tmp ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then pushd tmp ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then echo -e "machine github.com\n  login $CI_USER_TOKEN" >> ~/.netrc ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then git clone --branch master --depth 1 https://github.com/tanjoin/tanjoin.github.io.git ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then pushd tanjoin.github.io ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then git config user.name "tanjoin" ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then git config user.email "tanjoin@users.noreply.github.com" ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then popd ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then popd ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then bundle install --path vendor/bundle ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then JEKYLL_ENV=production bundle exec jekyll build --destination tmp/tanjoin.github.io/  ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then pushd tmp ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then pushd tanjoin.github.io ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then git add --all ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then git commit -a -m "Update _site by Travis" ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then git push origin master ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then popd ; fi
- if [ ! $TRAVIS_EVENT_TYPE = cron ]; then popd ; fi
install: true
branches:
  only:
  - develop
notifications:
  slack:
    secure: 2yVMp/Qavq2uEoPGtBSgfFl/KLr7wtDtu0nlJQtg2w9wrkFMpvu4SWSValmbR66pkgr7sj+fpr/Obbyd3YxnacR0695J5hBeJPOt9R0Sm7zgtb+zi5SUo2i/SkTkBgkHWGJCx6liOLmXgehHA3WCmy/5dPBgrU5N064HLl4fdUreyQ+aEXzNBQ8XCvspE49okNtT458eIqnSXGMBeZ4HpJYvZvc7F2GLgWOtoLVO2MqpIHBmvxDzLL1qJ8kAx8SIB6+A5LrTfc7xCcsi2kXrk1/U7IdUr6VfAZR/zDVLk5SiTRcFKbxdc9LY+2exXLqgikpLY6P3vIxFG5ThOZsVKtt/bNsPl9bzehVHvjdhnL8MRdKBvcApr+E+ymJC6+uANRmHsYX5fO2TstEF+xPJnmA83mgR1hwmVwejxip3PAPFghx1WGloz/oG28K9z0A5IdS9ZKr5Fv5/5UgPvdlovOCA5xREEPzG9p1diVTFg041YW/s2cL44pYGhPc7CdloS2rUK/zAq4WzekdoLhf0JvWOQzQ3fupQ5B5UpUu+PtWWPCfKS7xcnEXdMhBo1qrPj2eLFeSApJgObKlxA8M+BLYl4huTeuCuXMdLOvSZmSiVZZ5ShMst8gFZav8k59yFTKAK/YrL19mMBwg10AiJPDlGh2fpBxqlCbymGrvNsvA=
    on_success: never
    on_failure: always
